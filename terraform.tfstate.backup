{
  "version": 4,
  "terraform_version": "0.14.7",
  "serial": 92,
  "lineage": "10ee4168-b75b-79fd-ad30-aefa6c3f2396",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "azurerm_iothub_shared_access_policy",
      "name": "pihub_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/28ae6606-dc4d-4968-a076-c18ee303b199/resourceGroups/learn-f2f7424d-3c58-4758-8f9a-075aea379984/providers/Microsoft.Devices/IotHubs/pihub-217288933/IotHubKeys/iothubowner",
            "iothub_name": "pihub-217288933",
            "name": "iothubowner",
            "primary_connection_string": "HostName=pihub-217288933.azure-devices.net;SharedAccessKeyName=iothubowner;SharedAccessKey=uOcYEprOI9v2z30lxxVvQBBGA8OHCokfwzOzK7z3UkY=",
            "primary_key": "uOcYEprOI9v2z30lxxVvQBBGA8OHCokfwzOzK7z3UkY=",
            "resource_group_name": "learn-f2f7424d-3c58-4758-8f9a-075aea379984",
            "secondary_connection_string": "HostName=pihub-217288933.azure-devices.net;SharedAccessKeyName=iothubowner;SharedAccessKey=OwP7MheKnTG3TOOXsh6Xf9KK8CSJYfSA+SsLi6RKMH8=",
            "secondary_key": "OwP7MheKnTG3TOOXsh6Xf9KK8CSJYfSA+SsLi6RKMH8=",
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "azurerm_resource_group",
      "name": "sandbox",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/28ae6606-dc4d-4968-a076-c18ee303b199/resourceGroups/learn-f2f7424d-3c58-4758-8f9a-075aea379984",
            "location": "westus",
            "name": "learn-f2f7424d-3c58-4758-8f9a-075aea379984",
            "tags": {
              "x-created-by": "freelearning",
              "x-created-for": "3123645b-07cc-4b45-9f7f-25a69ec5cf85",
              "x-module-id": "learn.manage-iot-devices"
            },
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_iothub",
      "name": "pihub",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "endpoint": [],
            "enrichment": [],
            "event_hub_events_endpoint": "sb://iothub-ns-pihub-2172-8908598-04f56afc1f.servicebus.windows.net/",
            "event_hub_events_path": "pihub-217288933",
            "event_hub_operations_endpoint": null,
            "event_hub_operations_path": null,
            "event_hub_partition_count": 4,
            "event_hub_retention_in_days": 1,
            "fallback_route": [
              {
                "condition": "true",
                "enabled": false,
                "endpoint_names": [
                  "events"
                ],
                "source": "DeviceMessages"
              }
            ],
            "file_upload": [],
            "hostname": "pihub-217288933.azure-devices.net",
            "id": "/subscriptions/28ae6606-dc4d-4968-a076-c18ee303b199/resourceGroups/learn-f2f7424d-3c58-4758-8f9a-075aea379984/providers/Microsoft.Devices/IotHubs/pihub-217288933",
            "ip_filter_rule": [],
            "location": "australiasoutheast",
            "min_tls_version": "",
            "name": "pihub-217288933",
            "public_network_access_enabled": null,
            "resource_group_name": "learn-f2f7424d-3c58-4758-8f9a-075aea379984",
            "route": [],
            "shared_access_policy": [
              {
                "key_name": "iothubowner",
                "permissions": "RegistryWrite, ServiceConnect, DeviceConnect",
                "primary_key": "uOcYEprOI9v2z30lxxVvQBBGA8OHCokfwzOzK7z3UkY=",
                "secondary_key": "OwP7MheKnTG3TOOXsh6Xf9KK8CSJYfSA+SsLi6RKMH8="
              },
              {
                "key_name": "service",
                "permissions": "ServiceConnect",
                "primary_key": "o0GVqF7X4iUZKeAGlRpzZdfCIR4Xhe3FufM9HVPRyEo=",
                "secondary_key": "EG/QhhJy7D+DLaJS2iFTG77zpS2ZwEu7UbvOvF1zvfg="
              },
              {
                "key_name": "device",
                "permissions": "DeviceConnect",
                "primary_key": "ltCUnDK8FIyLkF4TuAoOZGJNiNEocEVawtKafM468A0=",
                "secondary_key": "aZ6i9xtyjXkqT62N4Ii9hinGmxfJbyzQi2KuMXx9q2I="
              },
              {
                "key_name": "registryRead",
                "permissions": "RegistryRead",
                "primary_key": "ie8QGjvpQfAf2TQdQX3N1rT6pgGmRSfQBww4Eujm+kw=",
                "secondary_key": "fyd554uXjmdSPG8eMrzYkaCn9BHCtJzketP0rO7hQ0k="
              },
              {
                "key_name": "registryReadWrite",
                "permissions": "RegistryWrite",
                "primary_key": "SWPSGKUszKPJt4If7GFXS2BJTJGa9GC+scBTNvCBriM=",
                "secondary_key": "jpmenU6Xf6FRc3F8BxTdnG2P89MiiieSkgHusFDS48o="
              }
            ],
            "sku": [
              {
                "capacity": 1,
                "name": "S1"
              }
            ],
            "tags": {},
            "timeouts": null,
            "type": "Microsoft.Devices/IotHubs"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.azurerm_resource_group.sandbox"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_iothub_dps",
      "name": "pihub_dps",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_policy": "Hashed",
            "device_provisioning_host_name": "global.azure-devices-provisioning.net",
            "id": "/subscriptions/28ae6606-dc4d-4968-a076-c18ee303b199/resourceGroups/learn-f2f7424d-3c58-4758-8f9a-075aea379984/providers/Microsoft.Devices/provisioningServices/pihub-217288933-dps",
            "id_scope": "0ne002549BB",
            "linked_hub": [
              {
                "allocation_weight": 1,
                "apply_allocation_policy": true,
                "connection_string": "HostName=pihub-217288933.azure-devices.net;SharedAccessKeyName=iothubowner;SharedAccessKey=****",
                "hostname": "pihub-217288933.azure-devices.net",
                "location": "australiasoutheast"
              }
            ],
            "location": "australiasoutheast",
            "name": "pihub-217288933-dps",
            "resource_group_name": "learn-f2f7424d-3c58-4758-8f9a-075aea379984",
            "service_operations_host_name": "pihub-217288933-dps.azure-devices-provisioning.net",
            "sku": [
              {
                "capacity": 1,
                "name": "S1"
              }
            ],
            "tags": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_iothub.pihub",
            "data.azurerm_iothub_shared_access_policy.pihub_policy",
            "data.azurerm_resource_group.sandbox"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_iothub_dps_certificate",
      "name": "dps_root",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "certificate_content": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZPakNDQXlLZ0F3SUJBZ0lKQUk3SEw0N2ViUzJQTUEwR0NTcUdTSWIzRFFFQkN3VUFNQ294S0RBbUJnTlYKQkFNTUgwRjZkWEpsSUVsdlZDQklkV0lnUTBFZ1EyVnlkQ0JVWlhOMElFOXViSGt3SGhjTk1qRXdNekE0TVRFdwpOREl4V2hjTk1qRXdOREEzTVRFd05ESXhXakFxTVNnd0pnWURWUVFEREI5QmVuVnlaU0JKYjFRZ1NIVmlJRU5CCklFTmxjblFnVkdWemRDQlBibXg1TUlJQ0lqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FnOEFNSUlDQ2dLQ0FnRUEKbTBmWVRVMnJMVThlMWROTGpvTUZwZVRQMTd0eWFzSXFwRkRlOUZGYUgvaTNUTnpoQVV0NnpCSE5Wd0VmWGFiSApYempBUU9Od2hHM3E1RGNKbE9VbFc2cFhvUGNvUGhkWEsyV1QzeVlzRjFvWFBGaDAyWmdaOElhNFBOSzc3WU02CmVUeGtYL01oVk5IT1VsOVJhTmlseEJRSUZwd0gxRFA0WHM1QmM0Vmo0RWN5emZDQ1hnU1d6dHdYSkQ3QjdGV1kKdGxZQ2p6dld4cS9QenZpZ3d4b3NDRVhneTJORVJtTWlacERmOEZuUEsxa3d4VjZhTHhtNlplMzBPbjNpbkF2VAp6ZFZ1ZWJsTCtPU3F5UnpGMitYNlYzWFF2TzhxK1RZQWdmODBPOVh2QnU1OFpiSXpmRjUxVWpwS3VyK1dOaDYxCk54ZWtSN3FRZHFBVDFjMXlxWGd1QnZiOEVuYlIzeHpWQU43OG56N3E5T2ZpYmxyeVpCZEdwZm10RjlDeGVGeHgKd0FOSWVOVUZLTW9hMm96ZENVQjhsT1E5a3VEbWVZTXJzUFByL0pibnZrcmxrdHNsZjFKTUNLdlRWYnlRZVM3TApxdFBKS3FoeHRXUFRuMGdMcGdqdU4zK1ZxS3NMVTBoanNneWNMbG5ZTGFMMnFtL1dpNGlrSzk5bThLM3NwWEVOCnBuS0ttTmNOcklUY2tTZWkvNkVQclZ5U2J4TnZXWkxsUDJlMDRlb09wSmdaWC9ueHhLM1pMamlWeXpuWnUzSEQKREtMcEo2dWRuNTVYSTdRSk1XcVJUOGZ4eEFBVyswNmlpcUprdUhiUGswQzJhTVFRMThYd1Fpc3RlcHVrV0pqZwpEbVBGZEUwUkZiMGdmWDFxV0NrQWQ2eXBvUlczUkk2ZUJqb21OSW5hTGRjQ0F3RUFBYU5qTUdFd0hRWURWUjBPCkJCWUVGQ1lVTGRVVGVrczNpSVZidlh5ZWdEVjQrcDlYTUI4R0ExVWRJd1FZTUJhQUZDWVVMZFVUZWtzM2lJVmIKdlh5ZWdEVjQrcDlYTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3RGdZRFZSMFBBUUgvQkFRREFnR0dNQTBHQ1NxRwpTSWIzRFFFQkN3VUFBNElDQVFCWUJFL2NtV1N4RXQ5eVJpeHlVMnBvTTV2SEY4ZURPQk45Y2luU2VjRzh5SXlUCjZlaWFUUnNyaEpXcExiQW9nbFFqT1FYZ0Nwc04xVHRXZGZBVE5hNDNhbTVzZjFjVEZaQ3JlTW54cStLYmJIY3IKOHgzUm1OcmVuaExxUVYvL21RSktHQW95Yklmb2pzd3Z2TDlCQnJ0ODJsUDJxZ3hnRjF5a1N0QzVJbW9pcUQyTwpOUlpYMmw0Zmg0eWJDTThDekxHWjVVWnRldlZXQXJ5bCt1Vzg1NUxYa2xnR0xtbzlYR3NrWnRyM1AvQm9TQUtqCllTeitockxTTW15NjVBSFp4QURjOGJEcjkvaXQyQW1ZVkVra0hFUG1xNk9xYWJrRm9ZaERPTkFubUxVdm05QlkKaG5Qbm1xalVIRmw3NDdnN2dHRlM5RHpMOEc0ZS9ibFdiamhPbzRTYURRVjQrNjhpVDFCcmt2T0Y0d1JZOEZ3NQpzaU9Rc2wxaGRlZW4xTElQWkl4TFA1L1dTc1RSQm0vOU9IVEYxZ0RQN1R6dnk0TGs2eVFyalZ6Sm5xMUw0VFVICnFVdVY0UXIvM3BxLy9qaDdGdzdYbkkrcWlxNEgxVi9qNU5RZmFaKytkaGE5aTNkRUhkdTRBWnZhNjIvTzVYTWUKM1NPRCtjZDBiaWlpQ3hRUlBGakZIYnd6RFhKQjRnVWVrTW5SZCtDKzF4ZGllMnRjL2t2WmNQS2lwSEVkcHlWaQpvbW9NNTN0c3VwMXlFUGh4Y2VhRWgzU3lmZU5idkcyWmdxL0Q1bjVhZHVJYzlvMUFnMnBTZTF6L2FHYTVwdGtwCkVlMHVnWlEwbXdMN29ZTDNrRHJlUFh1WitjcXd3V2tpUFhCRkNUUWVXUy94L2hDWnQ3WXFhNUM0T3RNSGhBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=",
            "id": "/subscriptions/28ae6606-dc4d-4968-a076-c18ee303b199/resourceGroups/learn-f2f7424d-3c58-4758-8f9a-075aea379984/providers/Microsoft.Devices/provisioningServices/pihub-217288933-dps/certificates/iothub-dps-root",
            "iot_dps_name": "pihub-217288933-dps",
            "name": "iothub-dps-root",
            "resource_group_name": "learn-f2f7424d-3c58-4758-8f9a-075aea379984",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_iothub.pihub",
            "azurerm_iothub_dps.pihub_dps",
            "data.azurerm_iothub_shared_access_policy.pihub_policy",
            "data.azurerm_resource_group.sandbox"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "enrollment_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "status": "tainted",
          "schema_version": 0,
          "attributes": {
            "id": "8876849050182256485",
            "triggers": {
              "dps_root_name": "iothub-dps-root"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_iothub_dps.pihub_dps",
            "azurerm_iothub_dps_certificate.dps_root",
            "data.azurerm_resource_group.sandbox",
            "null_resource.verify_dps_certificate"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "verify_dps_certificate",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4043694361845285226",
            "triggers": {
              "dps_root_name": "iothub-dps-root"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "azurerm_iothub.pihub",
            "azurerm_iothub_dps.pihub_dps",
            "azurerm_iothub_dps_certificate.dps_root",
            "data.azurerm_iothub_shared_access_policy.pihub_policy",
            "data.azurerm_resource_group.sandbox"
          ]
        }
      ]
    }
  ]
}
